function searchCallback(){var e=Array(),t=Array(),a=Array(),n=Array(),s=Array(),l=Array();$("#inst-type").select2("data").forEach((t,a)=>{e.push(t.text)}),$("#inst-name").select2("data").forEach((e,a)=>{t.push(e.text)}),$("#apname").select2("data").forEach((e,t)=>{a.push(e.text)}),$("#quota").select2("data").forEach((e,t)=>{n.push(e.text)}),$("#seat-type").select2("data").forEach((e,t)=>{s.push(e.text)}),$("#gender").select2("data").forEach((e,t)=>{l.push(e.text)});var r={counsellingname:counsellingData.counselling,roundNo:parseInt($("#RoundNo").select2("data")[0].text),rank:parseInt($("#rank").val()),rankBuff:parseInt($("#rank-buff").val()),instts:e,insts:t,apns:a,quotas:n,sts:s,gens:l};makeApiCall("/api/counsellingdata",r,!0,e=>{var t=Array();e.data.forEach((e,a)=>{t.push({instt:e["Institute Type"],inst:e.Institute,apn:e["Academic Program Name"],quota:e.Quota,st:e["Seat Type"],gender:e.Gender,or:e["Opening Rank"],cr:e["Closing Rank"]})}),$("#table").bootstrapTable("load",t)})}function updateSelectData(e,t){if("string"==typeof e&&Array.isArray(t)){var a=$(e);if(a.length&&a.hasClass("select2-hidden-accessible")){var n=JSON.parse(JSON.stringify(a.data("select2").options.options));n.data=t,a.empty().select2("destroy").select2(n),a.val(null).trigger("change.select2")}else console.error("Element does not exist or not an select2 element")}else console.error("Invalid argument types")}var counsellingData={},counsellingDataSelect2={};$("#cssearch").on("submit",e=>{e.target.checkValidity()&&searchCallback()}),$(".select2-select-single").select2({theme:"bootstrap-5",width:$(this).data("width")?$(this).data("width"):$(this).hasClass("w-100")?"100%":"style",placeholder:$(this).data("placeholder"),closeOnSelect:!0,allowClear:!0}),$(".select2-select-multiple").select2({theme:"bootstrap-5",width:$(this).data("width")?$(this).data("width"):$(this).hasClass("w-100")?"100%":"style",placeholder:$(this).data("placeholder"),closeOnSelect:!1,multiple:!0,allowClear:!1}),$("#table").bootstrapTable({height:750,pagination:!0,paginationPreText:"Previous",paginationNextText:"Next",search:!0,searchAccentNeutralise:!0,trimOnSearch:!1,showColumns:!0,showColumnsToggleAll:!0,showPaginationSwitch:!0,advancedSearch:!0,idTable:"advancedTable",showPrint:!0,printPageBuilder:e=>`\n    <html>\n      <head>\n        <style type="text/css" media="print"> \n          @page {   size: auto;  margin: 25px 0 25px 0;  }  \n        </style>  \n        <style type="text/css" media="all">  \n          table {    border-collapse: collapse;    font-size: 12px;  }  \n          table, th, td {    border: 1px solid grey; }  \n          th, td {    text-align: center;   vertical-align: middle;  }  \n          p {    font-weight: bold;    margin-left:20px;  }  \n          table {    width:94%;    margin-left:3%;    margin-right:3%;  }  \n          div.bs-table-print {    text-align:center;  }  \n        </style>  \n      </head>  \n      <title>Print Table</title>  \n      <body> \n        <h1 style="text-align: center;">${counsellingData.counselling}</h1> \n        <p>Printed on: ${new Date} </p>\n        <div class="bs-table-print"> ${e} </div>  \n      </body>  \n    </html>`,data:[]}),$("#CounsellingName").on("select2:select",function(e){makeApiCall("/api/counsellinginfo",{counsellingname:e.params.data.text},!1,e=>{counsellingData=e;var t=Array(),a=Array(),n=Array(),s=Array(),l=Array(),r=Array(),i=Array();Array.from({length:e.Rounds},(e,t)=>t+1).forEach((e,a)=>{t.push({id:a,text:e})}),e["Institute Types"].forEach((e,t)=>{a.push({id:t,text:e})}),e.Institutes.forEach((e,t)=>{n.push({id:t,text:e})}),e["Academic Program Names"].forEach((e,t)=>{s.push({id:t,text:e})}),e.Quotas.forEach((e,t)=>{l.push({id:t,text:e})}),e["Seat Types"].forEach((e,t)=>{r.push({id:t,text:e})}),e.Genders.forEach((e,t)=>{i.push({id:t,text:e})}),counsellingDataSelect2={s2data_round:t,s2data_instt:a,s2data_inst:n,s2data_apn:s,s2data_quota:l,s2data_st:r,s2data_gen:i},updateSelectData("#RoundNo",t),updateSelectData("#inst-type",a),updateSelectData("#inst-name",n),updateSelectData("#apname",s),updateSelectData("#quota",l),updateSelectData("#seat-type",r),updateSelectData("#gender",i),$(".stage1").prop("disabled",!1),$("#cmessage").text("NOTE: "+e.message),$("#cmessage").removeClass("d-none")})}),$("#CounsellingName").on("select2:unselect",function(e){updateSelectData("#RoundNo",[]),updateSelectData("#inst-type",[]),updateSelectData("#inst-name",[]),updateSelectData("#apname",[]),updateSelectData("#quota",[]),updateSelectData("#seat-type",[]),updateSelectData("#gender",[]),$(".stage1").prop("disabled",!0),$(".stage2").prop("disabled",!0),$("#cmessage").text(""),$("#cmessage").addClass("d-none")}),$("#RoundNo").on("select2:select",function(e){$(".stage2").prop("disabled",!1)}),$("#RoundNo").on("select2:unselect",function(e){$(".stage2").prop("disabled",!0)}),$("#inst-type").on("change",function(e){var t=Array();$("#inst-type").select2("data").forEach((e,a)=>{t.push(e.text)}),0!=t.length?makeApiCall("/api/institutetypefilter",{counsellingname:counsellingData.counselling,roundNo:parseInt($("#RoundNo").select2("data")[0].text),instts:t},!1,e=>{var t=Array(),a=Array();e.Institutes.forEach((e,a)=>{t.push({id:a,text:e})}),e["Academic Program Names"].forEach((e,t)=>{a.push({id:t,text:e})}),updateSelectData("#inst-name",t),updateSelectData("#apname",a)}):(updateSelectData("#inst-name",counsellingDataSelect2.s2data_inst),updateSelectData("#apname",counsellingDataSelect2.s2data_apn))}),$("#inst-name").on("change",function(e){var t=Array(),a=Array();$("#inst-type").select2("data").forEach((e,a)=>{t.push(e.text)}),$("#inst-name").select2("data").forEach((e,t)=>{a.push(e.text)}),0!==a.length||0!==t.length?makeApiCall("/api/institutefilter",{counsellingname:counsellingData.counselling,roundNo:parseInt($("#RoundNo").select2("data")[0].text),instts:t,insts:a},!1,e=>{var t=Array();e["Academic Program Names"].forEach((e,a)=>{t.push({id:a,text:e})}),updateSelectData("#apname",t)}):updateSelectData("#apname",counsellingDataSelect2.s2data_apn)});